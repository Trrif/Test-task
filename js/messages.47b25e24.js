(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["messages"],{"092d":function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",{staticClass:"messages"},[e._l(e.messages,function(t){return[s("div",{key:t.id,staticClass:"messages__wrapper",class:{messages__wrapper_deleted:"deleted"===t.status}},[s("li",[s("div",{staticClass:"messages__item"},[s("div",{staticClass:"messages__text"},[e._v(e._s(t.text))]),s("button",{staticClass:"messages__btn",class:{messages__btn_pending:"pending"===t.status,messages__btn_deleted:"deleted"===t.status},attrs:{disabled:"pending"===t.status||!e.connected},on:{click:function(s){e.websocketHandler(t.id)}}},[e._v("\n\t\t\t\t\t\tУдалить\n\t\t\t\t\t")])])])])]}),s("div",{staticClass:"messages__wrapper"},[s("div",{staticClass:"messages__btn",on:{click:e.refresh}},[e._v("Refresh")])])],2)},i=[],a=s("2f62"),c={name:"TheMessages",mounted:function(){this.websocket||this.initWebsocket("wss://echo.websocket.org")},computed:Object(a["c"])("messages",["messages","connected","websocket"]),methods:Object(a["b"])("messages",["initWebsocket","websocketHandler","refresh"])},r=c,o=(s("8b2b"),s("2877")),u=Object(o["a"])(r,n,i,!1,null,null,null);u.options.__file="TheMessages.vue";t["default"]=u.exports},"0a49":function(e,t,s){var n=s("9b43"),i=s("626a"),a=s("4bf8"),c=s("9def"),r=s("cd1c");e.exports=function(e,t){var s=1==e,o=2==e,u=3==e,d=4==e,f=6==e,l=5==e||f,b=t||r;return function(t,r,p){for(var v,m,g=a(t),_=i(g),w=n(r,p,3),x=c(_.length),k=0,h=s?b(t,x):o?b(t,0):void 0;x>k;k++)if((l||k in _)&&(v=_[k],m=w(v,k,g),e))if(s)h[k]=m;else if(m)switch(e){case 3:return!0;case 5:return v;case 6:return k;case 2:h.push(v)}else if(d)return!1;return f?-1:u||d?d:h}}},1169:function(e,t,s){var n=s("2d95");e.exports=Array.isArray||function(e){return"Array"==n(e)}},"16fe":function(e,t,s){"use strict";s.d(t,"a",function(){return n});var n={state:{websocket:null,connected:!1},mutations:{setConnected:function(e){e.connected=!0},initWebsocket:function(e,t){var s=t.url,n=t.onmessage,i=t.onopen;e.websocket=new WebSocket(s),e.websocket.onopen=i,e.websocket.onmessage=n},sendWebsocket:function(e,t){e.websocket.send(t)}}}},"20d6":function(e,t,s){"use strict";var n=s("5ca1"),i=s("0a49")(6),a="findIndex",c=!0;a in[]&&Array(1)[a](function(){c=!1}),n(n.P+n.F*c,"Array",{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),s("9c6c")(a)},"4f16":function(e,t,s){"use strict";s.r(t);s("20d6");var n=s("be94"),i=s("16fe"),a=Object(n["a"])({},i["a"].state,{messages:[{text:"Тестовый коммент 1",id:0,status:"passive"},{text:"Это шедевр",id:4,status:"passive"},{text:"Это прекрасно",id:6,status:"passive"},{text:"Лучшее, что я видел",id:5,status:"passive"},{text:"Два чая этому автору",id:8,status:"passive"}]}),c={findIndexById:function(e){return function(t){return e.messages.findIndex(function(e){return e.id==t})}}},r={initWebsocket:function(e,t){var s=e.commit,n=e.dispatch;s("initWebsocket",{url:t,onopen:function(){s("setConnected")},onmessage:function(e){var t=e.data;n("delete",t)}})},websocketHandler:function(e,t){var s=e.commit,n=e.getters,i=n.findIndexById(t);s("setStatus",{index:i,status:"pending"}),s("sendWebsocket",t)},delete:function(e,t){var s=e.commit,n=e.getters,i=n.findIndexById(t);s("setStatus",{index:i,status:"deleted"}),setTimeout(function(){s("deleteMessage",i)},200)},refresh:function(e){var t=e.commit;t("refresh")}},o=Object(n["a"])({},i["a"].mutations,{deleteMessage:function(e,t){e.messages.splice(t,1)},setStatus:function(e,t){var s=t.index,n=t.status;e.messages[s].status=n},refresh:function(e){e.messages=[{text:"Тестовый коммент 1",id:0,status:"passive"},{text:"Это шедевр",id:4,status:"passive"},{text:"Это прекрасно",id:6,status:"passive"},{text:"Лучшее, что я видел",id:5,status:"passive"},{text:"Два чая этому автору",id:8,status:"passive"}]}});t["default"]={namespaced:!0,state:a,getters:c,actions:r,mutations:o}},"8b2b":function(e,t,s){"use strict";var n=s("e77c"),i=s.n(n);i.a},be94:function(e,t,s){"use strict";function n(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},i=Object.keys(s);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(s).filter(function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable}))),i.forEach(function(t){n(e,t,s[t])})}return e}s.d(t,"a",function(){return i})},cd1c:function(e,t,s){var n=s("e853");e.exports=function(e,t){return new(n(e))(t)}},e77c:function(e,t,s){},e853:function(e,t,s){var n=s("d3f4"),i=s("1169"),a=s("2b4c")("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),n(t)&&(t=t[a],null===t&&(t=void 0))),void 0===t?Array:t}}}]);
//# sourceMappingURL=messages.47b25e24.js.map